{"ast":null,"code":"import StockUser from '../../../models/stockuser.model';\nexport default (async (req, res) => {\n  //   try {\n  var number = req.body.number;\n  console.log(number);\n  const user = await StockUser.find({\n    \"_id\": number\n  });\n  console.log(user);\n  console.log(req.body.code);\n  console.log(user[\"code\"].toString() == req.body.code.toString());\n\n  if (user[\"code\"] == req.body.code) {\n    await StockUser.updateOne({\n      _id: number\n    }, {\n      $set: {\n        signed: true\n      }\n    }, {\n      upsert: true,\n      setDefaultsOnInsert: true\n    });\n    res.status(200).send(\"success\");\n  } else res.status(400).send(\"failed\"); //   } catch (error) {\n  //     res.status(502).send(error);\n  //   }\n\n});","map":{"version":3,"sources":["D:/code/stock_api/pages/api/stockusers/log.ts"],"names":["StockUser","req","res","number","body","console","log","user","find","code","toString","updateOne","_id","$set","signed","upsert","setDefaultsOnInsert","status","send"],"mappings":"AACA,OAAOA,SAAP,MAAsB,iCAAtB;AAEA,gBAAe,OAAOC,GAAP,EAAwBC,GAAxB,KAA6C;AAC5D;AACI,MAAIC,MAAM,GAAGF,GAAG,CAACG,IAAJ,CAASD,MAAtB;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACA,QAAMI,IAAI,GAAI,MAAMP,SAAS,CAACQ,IAAV,CAAe;AAAC,WAAOL;AAAR,GAAf,CAApB;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACAF,EAAAA,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACG,IAAJ,CAASK,IAArB;AACAJ,EAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,CAAC,MAAD,CAAJ,CAAaG,QAAb,MAA2BT,GAAG,CAACG,IAAJ,CAASK,IAAT,CAAcC,QAAd,EAAvC;;AACA,MAAKH,IAAI,CAAC,MAAD,CAAJ,IAAgBN,GAAG,CAACG,IAAJ,CAASK,IAA9B,EAAoC;AAChC,UAAMT,SAAS,CAACW,SAAV,CAAoB;AAACC,MAAAA,GAAG,EAAET;AAAN,KAApB,EAAmC;AAACU,MAAAA,IAAI,EAAE;AAAEC,QAAAA,MAAM,EAAE;AAAV;AAAP,KAAnC,EAA6D;AAACC,MAAAA,MAAM,EAAG,IAAV;AAAgBC,MAAAA,mBAAmB,EAAE;AAArC,KAA7D,CAAN;AACAd,IAAAA,GAAG,CAACe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,SAArB;AACH,GAHD,MAIKhB,GAAG,CAACe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,QAArB,EAZmD,CAa5D;AAEA;AACA;;AAEC,CAlBD","sourcesContent":["import { NowRequest, NowResponse } from '@now/node'\r\nimport StockUser from '../../../models/stockuser.model'\r\n\r\nexport default async (req: NowRequest, res: NowResponse) => {\r\n//   try {\r\n    var number = req.body.number;\r\n    console.log(number)\r\n    const user = (await StockUser.find({\"_id\": number}));\r\n    console.log(user);\r\n    console.log(req.body.code)\r\n    console.log(user[\"code\"].toString() == req.body.code.toString())\r\n    if ((user[\"code\"] == req.body.code)){\r\n        await StockUser.updateOne({_id: number}, {$set: { signed: true }}, {upsert : true, setDefaultsOnInsert: true});\r\n        res.status(200).send(\"success\");\r\n    }\r\n    else res.status(400).send(\"failed\");\r\n//   } catch (error) {\r\n    \r\n//     res.status(502).send(error);\r\n//   }\r\n  \r\n}"]},"metadata":{},"sourceType":"module"}