{"ast":null,"code":"export default (async (req, res) => {\n  try {\n    var rows = req.query.number;\n\n    const generateRandomString = (length = 6) => Math.random().toString(20).substr(2, length);\n\n    const code = generateRandomString(); // await Promise.all(rows.map(async (row) => {\n    //   await StockUser.updateOne({_id: row[2]}, {$set: { code: code }}, {upsert : true, setDefaultsOnInsert: true});\n    // }));\n\n    res.status(200).send(code);\n  } catch (error) {\n    res.status(502).send(error);\n  }\n});","map":{"version":3,"sources":["D:/code/stock_api/pages/api/stockusers/add.ts"],"names":["req","res","rows","query","number","generateRandomString","length","Math","random","toString","substr","code","status","send","error"],"mappings":"AAGA,gBAAe,OAAOA,GAAP,EAAwBC,GAAxB,KAA6C;AAC1D,MAAI;AACF,QAAIC,IAAI,GAAGF,GAAG,CAACG,KAAJ,CAAUC,MAArB;;AACA,UAAMC,oBAAoB,GAAG,CAACC,MAAM,GAAC,CAAR,KAAYC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,EAAqCJ,MAArC,CAAzC;;AACA,UAAMK,IAAI,GAAGN,oBAAoB,EAAjC,CAHE,CAKF;AACA;AACA;;AAEAJ,IAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,IAArB;AACD,GAVD,CAUE,OAAOG,KAAP,EAAc;AACdb,IAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,KAArB;AACD;AAEF,CAfD","sourcesContent":["import { NowRequest, NowResponse } from '@now/node'\r\nimport StockUser from '../../../models/stockuser.model'\r\n\r\nexport default async (req: NowRequest, res: NowResponse) => {\r\n  try {\r\n    var rows = req.query.number;\r\n    const generateRandomString = (length=6)=>Math.random().toString(20).substr(2, length);\r\n    const code = generateRandomString();\r\n\r\n    // await Promise.all(rows.map(async (row) => {\r\n    //   await StockUser.updateOne({_id: row[2]}, {$set: { code: code }}, {upsert : true, setDefaultsOnInsert: true});\r\n    // }));\r\n\r\n    res.status(200).send(code);\r\n  } catch (error) {\r\n    res.status(502).send(error);\r\n  }\r\n  \r\n}"]},"metadata":{},"sourceType":"module"}